{"version":3,"sources":["webpack:///./src/components/pick-regions/pick-regions.vue?8ba6","webpack:///./src/components/pick-regions/pick-regions.vue?5b71","webpack:///./src/components/pick-regions/pick-regions.vue?3138","webpack:///./src/components/pick-regions/pick-regions.vue?34d1","webpack:///./src/components/pick-regions/pick-regions.vue"],"names":["CHINA_REGIONS","require","props","defaultRegions","type","Array","default","defaultRegionCode","String","defaultRegion","data","cityArr","districtArr","multiIndex","isInitMultiArray","watch","handler","region","oldRegion","isArray","join","handleDefaultRegion","length","console","warn","immediate","computed","multiArray","pickedArr","map","arr","item","name","childs","methods","handleColumnChange","e","that","col","detail","column","row","value","handleValueChange","index0","index1","index2","arr0","arr1","arr2","address","$emit","isCode","children","i","j","condition","code","slice","includes","$set"],"mappings":"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","file":"components/pick-regions/pick-regions.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./pick-regions.vue?vue&type=template&id=80bcada2&\"\nvar renderjs\nimport script from \"./pick-regions.vue?vue&type=script&lang=js&\"\nexport * from \"./pick-regions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"src/components/pick-regions/pick-regions.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pick-regions.vue?vue&type=template&id=80bcada2&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pick-regions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pick-regions.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\nconst CHINA_REGIONS = require('./regions.json')\nexport default {\n  props: {\n    defaultRegions: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    defaultRegionCode: {\n      type: String\n    },\n    defaultRegion: [String, Array]\n  },\n  data() {\n    return {\n      cityArr: [],\n      districtArr: [],\n      multiIndex: [0, 0, 0],\n      isInitMultiArray: true,\n    }\n  },\n  watch: {\n    defaultRegion: {\n      handler(region, oldRegion) {\n        if (Array.isArray(region)) {\n          // 避免传的是字面量的时候重复触发\n          oldRegion = oldRegion || []\n          if (region.join('') !== oldRegion.join('')) {\n            this.handleDefaultRegion(region)\n          }\n        } else if (region.length == 6) {\n          this.handleDefaultRegion(region)\n        } else {\n          console.warn('defaultRegion非有效格式')\n        }\n      },\n      immediate: true,\n    }\n  },\n  computed: {\n    multiArray() {\n      return this.pickedArr.map(arr => arr.map(item => item.name))\n    },\n    pickedArr() {\n      // 进行初始化\n      if (this.isInitMultiArray) {\n        return [\n          CHINA_REGIONS,\n          CHINA_REGIONS[0].childs,\n          CHINA_REGIONS[0].childs[0].childs\n        ]\n      }\n      return [CHINA_REGIONS, this.cityArr, this.districtArr];\n    }\n  },\n  methods: {\n    handleColumnChange(e) {\n      // console.log(e);\n      this.isInitMultiArray = false;\n      const that = this;\n      let col = e.detail.column;\n      let row = e.detail.value;\n      that.multiIndex[col] = row;\n      try {\n        switch (col) {\n          case 0:\n            if (CHINA_REGIONS[that.multiIndex[0]].childs.length == 0) {\n              that.cityArr = that.districtArr = [CHINA_REGIONS[that.multiIndex[0]]]\n              break;\n            }\n            that.cityArr = CHINA_REGIONS[that.multiIndex[0]].childs\n            that.districtArr = CHINA_REGIONS[that.multiIndex[0]].childs[that.multiIndex[1]].childs\n            break;\n          case 1:\n            that.districtArr = CHINA_REGIONS[that.multiIndex[0]].childs[that.multiIndex[1]].childs\n            break;\n          case 2:\n            break;\n        }\n      } catch (e) {\n        // console.log(e);\n        that.districtArr = CHINA_REGIONS[that.multiIndex[0]].childs[0].childs\n      }\n\n    },\n    handleValueChange(e) {\n      // 结构赋值\n      let [index0, index1, index2] = e.detail.value;\n      let [arr0, arr1, arr2] = this.pickedArr;\n      let address = [arr0[index0], arr1[index1], arr2[index2]];\n      // console.log(address);\n      this.$emit('getRegion', address)\n    },\n    handleDefaultRegion(region) {\n      const isCode = !Array.isArray(region)\n      this.isInitMultiArray = false;\n      let children = CHINA_REGIONS\n      for (let i = 0; i < 3; i++) {\n        for (let j = 0; j < children.length; j++) {\n          let condition = isCode ? children[j].code == region.slice(0, (i + 1) * 2) : children[j].name.includes(region[i]);\n          if (condition) {\n            // 匹配成功进行赋值\n            // console.log(i,j,children.length-1);\n            children = children[j].childs;\n            if (i == 0) {\n              this.cityArr = children\n            } else if (i == 1) {\n              this.districtArr = children\n            }\n            this.$set(this.multiIndex, i, j)\n            // console.log(this.multiIndex);\n            break;\n          } else {\n            // 首次匹配失败就用默认的初始化\n            // console.log(i,j,children.length-1);\n            if (i == 0 && j == (children.length - 1)) {\n              this.isInitMultiArray = true;\n            }\n          }\n        }\n      }\n    }\n  },\n}\n"],"sourceRoot":""}