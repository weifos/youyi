{"version":3,"sources":["webpack:///./src/main.js","webpack:///./src/pages/home/userIndex.vue?7a45","webpack:///./src/pages/home/userIndex.vue?a055","webpack:///./src/pages/home/userIndex.vue?7603","webpack:///./src/pages/home/userIndex.vue?36b2","webpack:///./src/pages/home/userIndex.vue","webpack:///./src/pages/home/userIndex.vue?2c82","webpack:///./src/pages/home/userIndex.vue?1b73"],"names":["createPage","Page","components","uniList","uniListItem","data","userType","isLogin","userInfo","id","nick_name","login_name","headimgurl","onLoad","that","passport","checkSession","openid","wxUser","user","methods","getUser","api_106","bindUser","checkRedirect","getMobile","e","bindMobile","code","api","state","state_200","appG","util","getHideMobile","wx","getStorage","key","success","res","router","goUrl","url","removeStorageSync","getWxUser","avatarUrl","nickname","post","getSign","OpenID","app","Basis","State","Result","undefined","decodeURI","login","showToast","title","Msg","icon","duration","uni","navigateTo","returl","getStorageSync","removeStorage"],"mappings":";;;;;;;;;;;;AAAA;;AAAmB;;AACnB;;AACA;;;;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACc;;;AAGtE;AACmI;AACnI,gBAAgB,gJAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,wLAAmG;AAC9G,GAAG;AACH;AACA,WAAW,sNAAuH;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACfA;AAAA;AAAA;AAAA;AAAsc,CAAgB,keAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC4F1d;;AACA;;AACA;;AACA;;;;AA/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;eAUe;AACbC,YAAU,EAAE;AAAEC,WAAO,EAAPA,OAAF;AAAWC,eAAW,EAAXA;AAAX,GADC;AAEbC,MAFa,kBAEN;AACL,WAAO;AACLC,cAAQ,EAAE,CADL;AACO;AACZC,aAAO,E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","file":"pages/home/userIndex.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/home/userIndex.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./userIndex.vue?vue&type=template&id=ffa13aca&\"\nvar renderjs\nimport script from \"./userIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./userIndex.vue?vue&type=script&lang=js&\"\nimport style0 from \"./userIndex.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"src/pages/home/userIndex.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userIndex.vue?vue&type=template&id=ffa13aca&\"","var components = {\n  \"uni-list\": function() {\n    return import(/* webpackChunkName: \"components/uni-list/uni-list\" */ \"@/components/uni-list/uni-list.vue\")\n  },\n  \"uni-list-item\": function() {\n    return import(/* webpackChunkName: \"components/uni-list-item/uni-list-item\" */ \"@/components/uni-list-item/uni-list-item.vue\")\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userIndex.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport api from '@/modules/api'\nimport user from '@/modules/userInfo'\nimport appG from '@/modules/appGlobal'\nimport passport from \"@/modules/passport\"\nimport uniList from '@/components/uni-list/uni-list.vue'\nimport uniListItem from '@/components/uni-list-item/uni-list-item.vue'\n\nexport default {\n  components: { uniList, uniListItem },\n  data() {\n    return {\n      userType: 1,//1:非会员 2:普通会员 3:高级会员\n      isLogin: true,\n      userInfo: {\n        id: 0,\n        nick_name: '未设置',\n        login_name: '未登录',\n        headimgurl: 'https://ossweb-img.qq.com/images/lol/web201310/skin/big99008.jpg'\n      }\n    }\n  },\n  onLoad() {\n    let that = this\n    //检测成功回调\n    passport.checkSession(function (openid) {\n      let wxUser = user.methods.getUser()\n      if (!wxUser.login_name) {\n        //加载用户信息\n        that.api_106()\n      } else {\n        that.bindUser(wxUser)\n        //检测页面重定向\n        that.checkRedirect()\n      }\n    })\n\n  },\n  methods: {\n    /**\n     * 获取手机号码\n     */\n    getMobile: function (e) {\n      let that = this\n      passport.bindMobile(e, function (code, user) {\n        if (code == api.state.state_200) {\n          that.isLogin = true\n          userInfo.login_name = appG.util.getHideMobile(user.login_name)\n        }\n\n        wx.getStorage({\n          key: 'returl',\n          success(res) {\n            if (res.data) {\n              router.goUrl({\n                url: res.data\n              })\n            }\n            wx.removeStorageSync('returl')\n          }\n        })\n      })\n    },\n    /**\n     * 加载微信用户信息\n     */\n    getWxUser: function (e) {\n      let that = this\n      passport.getWxUser(e, function (code, user) {\n        if (code == api.state.state_200) {\n          that.userInfo.headimgurl = appG.util.getHideMobile(user.avatarUrl)\n        }\n      })\n    },\n    /**\n     * 加载微信用户信息\n     */\n    bindUser: function (user) {\n      if (user.nickname) this.userInfo.nick_name = user.nickname\n      if (user.headimgurl) this.userInfo.headimgurl = user.headimgurl\n      this.userInfo.login_name = appG.util.getHideMobile(user.login_name)\n    },\n    /**\n     * 加载用户信息\n     */\n    api_106: function () {\n      let that = this\n      let userInfo = user.methods.getUser()\n      api.post(api.api_106,\n        api.getSign({\n          OpenID: userInfo.openid\n        }),\n        function (app, res) {\n          if (res.data.Basis.State == api.state.state_200) {\n            if (res.data.Result.login_name != undefined) {\n              //昵称\n              res.data.Result.nickname = decodeURI(res.data.Result.nickname)\n              //登录\n              user.methods.login(res.data.Result)\n              //绑定用户\n              that.bindUser(res.data.Result)\n              //检测页面重定向\n              that.checkRedirect()\n            } else {\n              //弹出手机号码授权\n              that.isLogin = false\n            }\n          } else {\n            wx.showToast({\n              title: res.data.Basis.Msg,\n              icon: 'none',\n              duration: 3000\n            })\n          }\n        })\n    },\n    /**\n     * 路由跳转\n     */\n    goUrl(url) {\n      uni.navigateTo({\n        url,\n      })\n    },\n    /**\n     * 检测是否需要重定向\n     */\n    checkRedirect(url) {\n      let returl = uni.getStorageSync('returl')\n      if (returl != \"\") {\n        uni.removeStorage({\n          key: 'returl',\n          success: function (res) { }\n        })\n        //关闭所有页面，打开到应用内的某个页面。\n        //uni.reLaunch({ url: returl })\n        uni.navigateTo({ url: returl })\n      }\n    }\n\n  },\n  /**\n  * 获取手机号码\n  */\n  getMobile: function (e) {\n    let that = this\n    passport.bindMobile(e, function (code, user) {\n      if (code == api.state.state_200) {\n        that.isLogin = true\n        that.userInfo.login_name = appG.util.getHideMobile(user.login_name)\n      }\n\n      wx.getStorage({\n        key: 'returl',\n        success(res) {\n          if (res.data) {\n            router.goUrl({\n              url: res.data\n            })\n          }\n          wx.removeStorageSync('returl')\n        }\n      })\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userIndex.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userIndex.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1589638196506\n      var cssReload = require(\"/Users/zhaixiaofang/Documents/weifos/youyi/20200516/youyi/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}